---
layout: post
title: "user lacks privilege or object not found: MYCLASS"
tagline: "Error on creating table with an invalid column definition"
date: 2014-06-25
disqus_identifier: 2014-06-25-1
comments: True
tags: [Java, Hibernate]
---


I have a project that Use Spring JPARepositories on Hibernate entities, running on HSQLDB.
When I'm trying to run my test, I got the following error:

{% highlight java %}
    org.hsqldb.HsqlException: user lacks privilege or object not found: MYCLASS
{% endhighlight %}

After investigation, and a lot of the read the log, I found why.

The main problem was that error isn't relevant.
So, first thing to do is to activate log4j and log the Hibernate command.

{% highlight properties %}
# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=INFO, file, stdout

# Log everything. Good for troubleshooting
log4j.logger.org.hibernate=INFO

# Log all JDBC parameters
log4j.logger.org.hibernate.type=ALL
{% endhighlight %}

Then, on the log, you can find the line where the table that's not found is created:

{% highlight java %}
    create table MYCLASS (id integer generated by default as identity (start with 1), uid varchar(36), creatDate datetime default '2012/01/01 00:00:01', creatId bigint default 0, creatUserId bigint default 0, modDate datetime default '2012/01/01 00:00:01', modId bigint default 0, modUserId bigint default 0, version int default 0, primary key (id), unique (uid))

    Unsuccessful: create table MYCLASS (id integer generated by default as identity (start with 1), uid varchar(36), creatDate datetime default '2012/01/01 00:00:01', creatId bigint default 0, creatUserId bigint default 0, modDate datetime default '2012/01/01 00:00:01', modId bigint default 0, modUserId bigint default 0, version int default 0, primary key (id), unique (uid))

data exception: invalid datetime format
{% endhighlight %}

Has you can see here, HSQLDB crashed on creating the table MYCLASS due to an **invalid datetime format**.
In this case replacing in my entities the column definition `@Column(columnDefinition = "datetime default '2012/01/01 00:00:01'")` by `@Column(columnDefinition = "datetime default '2010-01-01 00:00:01'")` fix the problem.

You could get the same error with other *columndefinition type*:

- `@Column(columnDefinition = "bigint(20) default 0")` to `@Column(columnDefinition = "bigint default 0", length = 20)`
