<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>2015s on Rocket Vision</title>
    <link>http://juliengarcia.github.io/2015/</link>
    <description>Recent content in 2015s on Rocket Vision</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 10 Nov 2015 14:04:36 +0100</lastBuildDate>
    <atom:link href="http://juliengarcia.github.io/2015/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Docker: Update your hosts with docker-machine ips automatically</title>
      <link>http://juliengarcia.github.io/2015/11/docker-hosts-automatic-update/</link>
      <pubDate>Tue, 10 Nov 2015 14:04:36 +0100</pubDate>
      
      <guid>http://juliengarcia.github.io/2015/11/docker-hosts-automatic-update/</guid>
      <description>

&lt;h1 id=&#34;docker-update-your-hosts-with-docker-machine-ips-automatically:4584454c65a244a9bd908e6297804a97&#34;&gt;Docker: Update your hosts with docker-machine ips automatically&lt;/h1&gt;

&lt;p&gt;I develop a small script to update your &lt;code&gt;/etc/hosts&lt;/code&gt; with your docker machine ip and a related resolved name.&lt;/p&gt;

&lt;p&gt;You can found in this &lt;a href=&#34;INSERT-GIST&#34;&gt;update-hosts-docker-machine.sh&lt;/a&gt; or here is it:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#!/usr/bin/env bash
#Usage docker-machine-update-hosts.sh hosts.conf
#arg1 is a configuration file with hosts

#Remove existing lines from hosts
while read -r line; do
    [[ &amp;quot;$line&amp;quot; =~ ^#.*$ ]] &amp;amp;&amp;amp; continue
  echo &amp;quot;Configuration: $line&amp;quot;
  IFS=&#39;=&#39; read -a configuration &amp;lt;&amp;lt;&amp;lt; &amp;quot;$line&amp;quot;
  machine=${configuration[0]}

  IFS=&#39;,&#39; read -a hosts &amp;lt;&amp;lt;&amp;lt; &amp;quot;${configuration[1]}&amp;quot;

  DOCKER_IP=$(docker-machine ip $machine)
  for host in &amp;quot;${hosts[@]}&amp;quot;; do
    echo &amp;quot;Adding $DOCKER_IP  $host&amp;quot;
    sudo bash -c &amp;quot;sed -i &#39;&#39; &#39;/^192\.168\.99\.[[:digit:]]\{0,3\}[[:space:]]*$host/d&#39; /etc/hosts&amp;quot;
    sudo bash -c &amp;quot;echo &#39;$DOCKER_IP  $host&#39; &amp;gt;&amp;gt; /etc/hosts&amp;quot;
  done

done &amp;lt; &amp;quot;$1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You have to use it with a configuration file, &lt;code&gt;hosts.conf&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Pattern
# &amp;lt;docker-machine name&amp;gt;=&amp;lt;host name&amp;gt;,&amp;lt;host name&amp;gt;,...
registry=docker-registry
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, run it with&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;gt; update-hosts-docker-machine.sh hosts.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;On OSX, you need to flush the dns cache&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;gt; dscacheutil -flushcache
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Docker: Installation on OSX</title>
      <link>http://juliengarcia.github.io/2015/11/docker-install-osx/</link>
      <pubDate>Tue, 10 Nov 2015 12:15:58 +0100</pubDate>
      
      <guid>http://juliengarcia.github.io/2015/11/docker-install-osx/</guid>
      <description>

&lt;h1 id=&#34;let-s-put-some-docker-in-your-osx:c37c4d4abc178f0a4b5ad7b30aa416ee&#34;&gt;Let&amp;rsquo;s put some Docker in your OSX&lt;/h1&gt;

&lt;p&gt;The easier way to install Docker is with the &lt;a href=&#34;https://www.docker.com/docker-toolbox&#34;&gt;Docker Toolbox&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Docker toolbox install:
 - Docker Client
 - Docker Machine
 - Docker Compose
 - Docker Kitematic
 - VirtualBox&lt;/p&gt;

&lt;p&gt;You can install Docker Toolbox via &lt;a href=&#34;http://brew.sh/&#34;&gt;Homebrew&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;gt; brew install docker-toolbox
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can run a Docker terminal with the VM boot2docker started and environment variable configured by running &lt;strong&gt;Docker Quickstart Terminal&lt;/strong&gt; app.&lt;/p&gt;

&lt;p&gt;Or you can run it by yourself with &lt;strong&gt;Docker Machine&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# List Docker Machine available

&amp;gt; docker-machine ls
NAME            ACTIVE   DRIVER       STATE     URL                         SWARM
default                  virtualbox   Running   tcp://192.168.99.101:2376

# To start a docker machine akka VM
# &amp;gt; docker-machine start &amp;lt;DOCKER-MACHINE-NAME&amp;gt;
&amp;gt; docker-machine start default

# To create a new docker machine
# docker-machine create --driver=&amp;lt;VM-DRIVER&amp;gt; &amp;lt;NAME-OF-VM&amp;gt;
# --driver=virtualbox is use in OSX to run with boot2docker
&amp;gt; docker-machine create --driver=virtualbox registry
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To allow your docker-client to speak with your docker daemon inside your docker machine &lt;em&gt;you follow me, right?&lt;/em&gt;, you need to configure some &lt;strong&gt;environment variables&lt;/strong&gt; like &lt;code&gt;DOCKER_HOST=&amp;lt;IP-OF-VM&amp;gt;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;docker-machine help you on that with:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;gt; eval $(docker-machine env virtual-slave)

# If you want to run connect to your vm with a specific shell you can use --shell=&amp;lt;SHELL-NAME&amp;gt;

&amp;gt; eval $(docker-machine env virtual-slave --shell=zsh)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>